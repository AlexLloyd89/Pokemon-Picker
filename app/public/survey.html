<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Survey Page</title>
    <!--Google Font-->
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet">
    <!--Bootstrap-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
    <!--CSS-->
    <link rel="stylesheet" type="text/css" href="style.css">

</head>

<body>
    <div class="overlay">
        <div class="container">

            <div class="jumbotron">
                <h1 class="text-center">Pokemon Picker</h1>
                <hr>
                <h2 id="jumbo_h2" class="text-center">Your adventure awaits!</h2>
                <br>
                <div class="text-center">
                    <a href="/"><button type="button" class="btn btn-lg btn-primary"><span class="glyphicon glyphicon-home"></span>
                            Home</button></a>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Begin Survey:
                        </div>
                        <div class="panel-body">
                            <form role="form">
                                About You
                                Name (Required)
                                <input type="text" name="" id="name" class="form-control" required>

                                Link to Photo Image (Required)
                                <input type="text" name="" id="photo" class="form-control" required>
                                <hr>

                                <h6>Survey Questions</h6>
                                <hr>

                                <h6>You like fire based Pokemon</h6>
                                <select data-placeholder="" class="chosen-select" id="q1">
                                    <option value=""></option>
                                    <option selected="selected" value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>


                                <h6>You like water based Pokemon</h6>
                                <select data-placeholder="" class="chosen-select" id="q2">
                                    <option value=""></option>
                                    <option selected="selected" value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>


                                <h6>You like grass based Pokemon</h6>
                                <select data-placeholder="" class="chosen-select" id="q3">
                                    <option value=""></option>
                                    <option selected="selected" value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>


                                <h6>The more something looks like a dragon, the cooler it is</h6>
                                <select data-placeholder="" class="chosen-select" id="q4">
                                    <option value=""></option>
                                    <option selected="selected" value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>


                                <h6>You would feel at home in a hurricane</h6>
                                <select data-placeholder="" class="chosen-select" id="q5">
                                    <option value=""></option>
                                    <option selected="selected" value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>

                                <h6>When you get stressed out, you have a tendency to retreat into yourself</h6>
                                <select data-placeholder="" class="chosen-select" id="q9">
                                    <option value=""></option>
                                    <option selected="selected" value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>

                                <h6>A day picking flowers sounds like a good day</h6>
                                <select data-placeholder="" class="chosen-select" id="q10">
                                    <option value=""></option>
                                    <option selected="selected" value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>

                                <h6>You can be stubborn</h6>
                                <select data-placeholder="" class="chosen-select" id="q6">
                                    <option value=""></option>
                                    <option selected="selected" value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>

                                <h6>You like playing with bugs</h6>
                                <select data-placeholder="" class="chosen-select" id="q7">
                                    <option value=""></option>
                                    <option selected="selected" value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>

                                <h6>You would like to explore a desert</h6>
                                <select data-placeholder="" class="chosen-select" id="q8">
                                    <option value=""></option>
                                    <option selected="selected" value="1">1 (Strongly Disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (Strongly Agree)</option>
                                </select>

                                <br>
                                <br>

                                <button type="submit" id="submit" class="btn btn-primary">Submit</button>
                            </form>
                        </div>

                    </div>

                </div>
            </div>
            <!-- Modal -->
            <div id="resultsModal" class="modal fade" role="dialog">
                <div class="modal-dialog">

                    <!-- Modal content-->
                    <div class="modal-content">

                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">X</button>
                            <div class="modal-title">Your first Pokemon should be:</div>
                        </div>
                        <div class="modal-body">
                            <div id="matchName"></div>
                            <img id="matchImg" src="" alt="" height="auto" width="350">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" id="closeModal" data-dismiss="modal">Close</button>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <script src="https://use.fontawesome.com/0bf9ac1b8c.js">
    </script>

    <!-- jQuery-->
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
        crossorigin="anonymous"></script>
    <!--bootstrapJS-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

    <script>
        // Get user info
        $("#submit").on("click", function (event) {
            event.preventDefault();

            if (($('#name').val() !== "") && ($('#photo').val() !== "")) {
                // Create an object for the user's data
                var userinfo = {
                    name: $("#name").val(),
                    photo: $("#photo").val(),
                    scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $(
                            "#q5").val(),
                        $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $(
                            "#q10").val(),
                    ]
                }
                $.post("/api/friends", userinfo)
                    .then(function (data) {
                        $('#matchName').text(data.name);
                        $('#matchImg').attr('src', data.photo);
                        $('#resultsModal').modal('toggle');
                        $('name').val("");
                        $('#photo').val("");
                        console.log(data)
                    });

            } else {
                $(".modal-title").text("Missing required information");
                $(".modal-body").html("<h3>Please complete the form before submitting</h3>");
                $("#resultsModal").modal('toggle');
            }

        });
    </script>
</body>

</html>